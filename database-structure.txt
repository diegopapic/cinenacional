# Estructura de Base de Datos - CineNacional
# Generado autom√°ticamente el: 2026-02-16T00:38:37.947Z
# ================================================

## Schema Prisma

```prisma
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model Movie {
  id                    Int                        @id @default(autoincrement())
  slug                  String                     @unique @db.VarChar(255)
  title                 String                     @db.VarChar(255)
  year                  Int?
  releaseYear           Int?                       @map("release_year")
  releaseMonth          Int?                       @map("release_month") @db.SmallInt
  releaseDay            Int?                       @map("release_day") @db.SmallInt
  duration              Int?
  durationSeconds       Int?                       @map("duration_seconds")
  tipoDuracion          String?                    @map("tipo_duracion") @db.VarChar(20)
  synopsis              String?
  notes                 String?
  tagline               String?                    @db.VarChar(500)
  posterUrl             String?                    @map("poster_url") @db.VarChar(500)
  posterPublicId        String?                    @map("poster_public_id") @db.VarChar(500)
  trailerUrl            String?                    @map("trailer_url") @db.VarChar(500)
  imdbId                String?                    @map("imdb_id") @db.VarChar(20)
  stage                 MovieStage                 @default(COMPLETA)
  colorTypeId           Int?                       @map("color_type_id")
  soundType             String?                    @map("sound_type") @db.VarChar(50)
  ratingId              Int?                       @map("rating_id")
  countries             String[]                   @default(["Argentina"])
  is_coproduction       Boolean                    @default(false)
  production_type       String                     @default("national")
  filmingStartYear      Int?                       @map("filming_start_year")
  filmingStartMonth     Int?                       @map("filming_start_month") @db.SmallInt
  filmingStartDay       Int?                       @map("filming_start_day") @db.SmallInt
  filmingEndYear        Int?                       @map("filming_end_year")
  filmingEndMonth       Int?                       @map("filming_end_month") @db.SmallInt
  filmingEndDay         Int?                       @map("filming_end_day") @db.SmallInt
  createdAt             DateTime                   @default(now()) @map("created_at")
  updatedAt             DateTime                   @updatedAt @map("updated_at")
  dataCompleteness      DataCompleteness           @default(BASIC_PRESS_KIT) @map("data_completeness")
  metaDescription       String?                    @map("meta_description")
  metaKeywords          String[]                   @map("meta_keywords")
  synopsisLocked        Boolean                    @default(false) @map("synopsis_locked")
  tmdbId                Int?                       @map("tmdb_id")
  imdbVotes             Int?                       @map("imdb_votes")
  imdbVotesUpdatedAt    DateTime?                  @map("imdb_votes_updated_at") @db.Timestamptz
  images                Image[]
  alternativeTitles     MovieAlternativeTitle[]
  awards                MovieAward[]
  cast                  MovieCast[]
  movieCountries        MovieCountry[]
  crew                  MovieCrew[]
  distributionCompanies MovieDistributionCompany[]
  genres                MovieGenre[]
  links                 MovieLink[]
  productionCompanies   MovieProductionCompany[]
  screenings            MovieScreening[]
  stats                 MovieStats?
  themes                MovieTheme[]
  videos                MovieVideo[]
  tmdbPendingMovies     TmdbPendingMovie[]
  colorType             ColorType?                 @relation(fields: [colorTypeId], references: [id])
  rating                Rating?                    @relation(fields: [ratingId], references: [id])
  pageViews             PageView[]
  userRatings           UserRating[]
  watchedBy             UserWatched[]
  watchlists            UserWatchlist[]
  festivalScreenings    FestivalScreening[]
  festivalAwardWinners  FestivalAwardWinner[]

  @@index([slug])
  @@index([title])
  @@index([year])
  @@index([tipoDuracion])
  @@index([ratingId])
  @@index([filmingStartYear])
  @@index([filmingStartYear, filmingStartMonth])
  @@index([is_coproduction])
  @@index([production_type])
  @@index([colorTypeId])
  @@index([stage])
  @@index([releaseYear])
  @@index([releaseYear, releaseMonth])
  @@index([releaseYear, releaseMonth, releaseDay])
  @@index([createdAt])
  @@index([synopsisLocked], map: "idx_movies_synopsis_locked")
  @@index([tmdbId], map: "idx_movies_tmdb_id")
  @@map("movies")
}

model ScreeningVenue {
  id          Int              @id @default(autoincrement())
  slug        String           @unique @db.VarChar(255)
  name        String           @db.VarChar(255)
  type        VenueType
  description String?
  logoUrl     String?          @map("logo_url") @db.VarChar(500)
  website     String?          @db.VarChar(500)
  address     String?          @db.VarChar(500)
  city        String?          @db.VarChar(100)
  province    String?          @db.VarChar(100)
  country     String?          @default("Argentina") @db.VarChar(100)
  latitude    Decimal?         @db.Decimal(10, 8)
  longitude   Decimal?         @db.Decimal(11, 8)
  isActive    Boolean          @default(true) @map("is_active")
  createdAt   DateTime         @default(now()) @map("created_at")
  updatedAt   DateTime         @updatedAt @map("updated_at")
  screenings          MovieScreening[]
  festivalScreenings  FestivalScreening[]

  @@index([name])
  @@index([type])
  @@index([isActive])
  @@map("screening_venues")
}

model AuditLog {
  id        String   @id @default(cuid())
  userId    String   @map("user_id")
  action    String
  entity    String?
  entityId  String?
  metadata  Json?
  ip        String?
  userAgent String?
  createdAt DateTime @default(now())
  user      User     @relation(fields: [userId], references: [id])

  @@index([userId])
  @@index([createdAt])
  @@map("audit_logs")
}

model MovieScreening {
  id            Int            @id @default(autoincrement())
  movieId       Int            @map("movie_id")
  venueId       Int            @map("venue_id")
  screeningDate DateTime?      @map("screening_date") @db.Date
  endDate       DateTime?      @map("end_date") @db.Date
  isPremiere    Boolean        @default(false) @map("is_premiere")
  isExclusive   Boolean        @default(false) @map("is_exclusive")
  notes         String?
  createdAt     DateTime       @default(now()) @map("created_at")
  movie         Movie          @relation(fields: [movieId], references: [id], onDelete: Cascade)
  venue         ScreeningVenue @relation(fields: [venueId], references: [id], onDelete: Cascade)

  @@unique([movieId, venueId, screeningDate])
  @@index([movieId])
  @@index([venueId])
  @@index([screeningDate])
  @@map("movie_screenings")
}

model MovieAlternativeTitle {
  id          Int      @id @default(autoincrement())
  movieId     Int      @map("movie_id")
  title       String   @db.VarChar(255)
  description String?
  createdAt   DateTime @default(now()) @map("created_at")
  movie       Movie    @relation(fields: [movieId], references: [id], onDelete: Cascade)

  @@index([movieId])
  @@index([title])
  @@map("movie_alternative_titles")
}

model MovieLink {
  id        Int      @id @default(autoincrement())
  movieId   Int      @map("movie_id")
  type      LinkType
  url       String
  title     String?  @db.VarChar(255)
  isActive  Boolean  @default(true) @map("is_active")
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  movie     Movie    @relation(fields: [movieId], references: [id], onDelete: Cascade)

  @@index([movieId])
  @@index([type])
  @@map("movie_links")
}

model Person {
  id               Int                     @id @default(autoincrement())
  slug             String                  @unique @db.VarChar(255)
  firstName        String?                 @map("first_name") @db.VarChar(255)
  lastName         String?                 @map("last_name") @db.VarChar(255)
  realName         String?                 @map("real_name") @db.VarChar(255)
  birthYear        Int?                    @map("birth_year")
  birthMonth       Int?                    @map("birth_month") @db.SmallInt
  birthDay         Int?                    @map("birth_day") @db.SmallInt
  deathYear        Int?                    @map("death_year")
  deathMonth       Int?                    @map("death_month") @db.SmallInt
  deathDay         Int?                    @map("death_day") @db.SmallInt
  birthLocationId  Int?                    @map("birth_location_id")
  deathLocationId  Int?                    @map("death_location_id")
  biography        String?
  photoUrl         String?                 @map("photo_url") @db.VarChar(500)
  gender           Gender?
  hideAge          Boolean                 @default(false) @map("hide_age")
  hasLinks         Boolean                 @default(false) @map("has_links")
  isActive         Boolean                 @default(true) @map("is_active")
  createdAt        DateTime                @default(now()) @map("created_at")
  updatedAt        DateTime                @updatedAt @map("updated_at")
  photoPublicId    String?                 @map("photo_public_id") @db.VarChar(255)
  imdbId           String?                 @map("imdb_id") @db.VarChar(20)
  tmdbId           Int?                    @map("tmdb_id")
  tmdbPopularity   Float?                  @map("tmdb_popularity")
  tmdbPopularityUpdatedAt DateTime?        @map("tmdb_popularity_updated_at") @db.Timestamptz
  imageAppearances ImagePerson[]
  awards           MovieAward[]
  castRoles        MovieCast[]
  crewRoles        MovieCrew[]
  pageViews        PageView[]
  birthLocation    Location?               @relation("BirthLocation", fields: [birthLocationId], references: [id])
  deathLocation    Location?               @relation("DeathLocation", fields: [deathLocationId], references: [id])
  alternativeNames     PersonAlternativeName[]
  links                PersonLink[]
  nationalities        PersonNationality[]
  festivalJury         FestivalJury[]
  festivalAwardWinners FestivalAwardWinner[]

  @@index([slug])
  @@index([firstName])
  @@index([lastName])
  @@index([birthLocationId])
  @@index([deathLocationId])
  @@index([isActive])
  @@index([birthYear])
  @@index([birthYear, birthMonth])
  @@index([deathYear])
  @@index([deathYear, deathMonth])
  @@index([createdAt])
  @@index([imdbId], map: "idx_people_imdb_id")
  @@index([tmdbId], map: "idx_people_tmdb_id")
  @@map("people")
}

model PersonAlternativeName {
  id        Int         @id @default(autoincrement())
  personId  Int         @map("person_id")
  fullName  String      @map("full_name") @db.VarChar(255)
  createdAt DateTime?   @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt DateTime?   @default(now()) @updatedAt @map("updated_at") @db.Timestamp(6)
  castRoles MovieCast[]
  crewRoles MovieCrew[]
  person    Person      @relation(fields: [personId], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([personId, fullName], map: "uq_people_alt_names_person_fullname")
  @@index([fullName], map: "idx_people_alt_names_full_name")
  @@index([personId], map: "idx_people_alt_names_person_id")
  @@map("people_alternative_names")
}

model PersonNationality {
  personId   Int      @map("person_id")
  locationId Int      @map("location_id")
  isPrimary  Boolean  @default(false) @map("is_primary")
  location   Location @relation(fields: [locationId], references: [id], onDelete: Cascade)
  person     Person   @relation(fields: [personId], references: [id], onDelete: Cascade)

  @@id([personId, locationId])
  @@map("person_nationalities")
}

model MovieStats {
  movieId    Int       @id @map("movie_id")
  viewsWeek  Int?      @default(0) @map("views_week")
  viewsMonth Int?      @default(0) @map("views_month")
  viewsYear  Int?      @default(0) @map("views_year")
  viewsTotal Int?      @default(0) @map("views_total")
  updatedAt  DateTime? @default(now()) @updatedAt @map("updated_at") @db.Timestamp(6)
  movie      Movie     @relation(fields: [movieId], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([viewsWeek(sort: Desc)], map: "idx_movie_stats_week")
  @@index([viewsMonth(sort: Desc)], map: "idx_movie_stats_month")
  @@index([viewsYear(sort: Desc)], map: "idx_movie_stats_year")
  @@index([viewsTotal(sort: Desc)], map: "idx_movie_stats_total")
  @@map("movie_stats")
}

model PersonLink {
  id           Int            @id @default(autoincrement())
  personId     Int            @map("person_id")
  type         PersonLinkType
  url          String         @db.VarChar(500)
  title        String?        @db.VarChar(255)
  displayOrder Int            @default(0) @map("display_order")
  isVerified   Boolean        @default(false) @map("is_verified")
  isActive     Boolean        @default(true) @map("is_active")
  lastChecked  DateTime?      @map("last_checked")
  createdAt    DateTime       @default(now()) @map("created_at")
  updatedAt    DateTime       @updatedAt @map("updated_at")
  person       Person         @relation(fields: [personId], references: [id], onDelete: Cascade)

  @@index([personId])
  @@index([type])
  @@index([isActive])
  @@map("person_links")
}

model Genre {
  id          Int          @id @default(autoincrement())
  slug        String       @unique @db.VarChar(100)
  name        String       @db.VarChar(100)
  description String?
  createdAt   DateTime     @default(now()) @map("created_at")
  movies      MovieGenre[]

  @@map("genres")
}

model ProductionCompany {
  id          Int                      @id @default(autoincrement())
  slug        String                   @unique @db.VarChar(255)
  name        String                   @db.VarChar(255)
  description String?
  foundedYear Int?                     @map("founded_year")
  logoUrl     String?                  @map("logo_url") @db.VarChar(500)
  website     String?                  @db.VarChar(500)
  country     String?                  @db.VarChar(100)
  createdAt   DateTime                 @default(now()) @map("created_at")
  updatedAt   DateTime                 @updatedAt @map("updated_at")
  movies      MovieProductionCompany[]

  @@map("production_companies")
}

model DistributionCompany {
  id          Int                        @id @default(autoincrement())
  slug        String                     @unique @db.VarChar(255)
  name        String                     @db.VarChar(255)
  description String?
  logoUrl     String?                    @map("logo_url") @db.VarChar(500)
  website     String?                    @db.VarChar(500)
  country     String?                    @db.VarChar(100)
  createdAt   DateTime                   @default(now()) @map("created_at")
  updatedAt   DateTime                   @updatedAt @map("updated_at")
  movies      MovieDistributionCompany[]

  @@map("distribution_companies")
}

model MovieCast {
  id                Int                    @id @default(autoincrement())
  movieId           Int                    @map("movie_id")
  personId          Int                    @map("person_id")
  characterName     String?                @map("character_name") @db.VarChar(255)
  billingOrder      Int?                   @map("billing_order")
  isPrincipal       Boolean                @default(false) @map("is_principal")
  notes             String?
  createdAt         DateTime               @default(now()) @map("created_at")
  isActor           Boolean                @default(true) @map("is_actor")
  alternativeNameId Int?                   @map("alternative_name_id")
  alternativeName   PersonAlternativeName? @relation(fields: [alternativeNameId], references: [id], onUpdate: NoAction)
  movie             Movie                  @relation(fields: [movieId], references: [id], onDelete: Cascade)
  person            Person                 @relation(fields: [personId], references: [id], onDelete: Cascade)

  @@unique([movieId, personId, characterName])
  @@index([movieId])
  @@index([personId])
  @@index([alternativeNameId], map: "idx_movie_cast_alt_name")
  @@index([isActor], map: "idx_movie_cast_is_actor")
  @@map("movie_cast")
}

model MovieCrew {
  id                Int                    @id @default(autoincrement())
  movieId           Int                    @map("movie_id")
  personId          Int                    @map("person_id")
  roleId            Int                    @map("role_id")
  billingOrder      Int?                   @map("billing_order")
  notes             String?
  createdAt         DateTime               @default(now()) @map("created_at")
  updatedAt         DateTime               @updatedAt @map("updated_at")
  alternativeNameId Int?                   @map("alternative_name_id")
  alternativeName   PersonAlternativeName? @relation(fields: [alternativeNameId], references: [id], onUpdate: NoAction)
  movie             Movie                  @relation(fields: [movieId], references: [id], onDelete: Cascade)
  person            Person                 @relation(fields: [personId], references: [id], onDelete: Cascade)
  role              Role                   @relation(fields: [roleId], references: [id])

  @@unique([movieId, personId, roleId])
  @@index([movieId])
  @@index([personId])
  @@index([roleId])
  @@index([movieId, roleId])
  @@index([alternativeNameId], map: "idx_movie_crew_alt_name")
  @@map("movie_crew")
}

model MovieGenre {
  movieId   Int     @map("movie_id")
  genreId   Int     @map("genre_id")
  isPrimary Boolean @default(false) @map("is_primary")
  genre     Genre   @relation(fields: [genreId], references: [id], onDelete: Cascade)
  movie     Movie   @relation(fields: [movieId], references: [id], onDelete: Cascade)

  @@id([movieId, genreId])
  @@map("movie_genres")
}

model MovieProductionCompany {
  movieId   Int               @map("movie_id")
  companyId Int               @map("company_id")
  isPrimary Boolean           @default(false) @map("is_primary")
  company   ProductionCompany @relation(fields: [companyId], references: [id], onDelete: Cascade)
  movie     Movie             @relation(fields: [movieId], references: [id], onDelete: Cascade)

  @@id([movieId, companyId])
  @@map("movie_production_companies")
}

model MovieDistributionCompany {
  movieId   Int                 @map("movie_id")
  companyId Int                 @map("company_id")
  territory String              @default("Argentina") @db.VarChar(100)
  company   DistributionCompany @relation(fields: [companyId], references: [id], onDelete: Cascade)
  movie     Movie               @relation(fields: [movieId], references: [id], onDelete: Cascade)

  @@id([movieId, companyId, territory])
  @@map("movie_distribution_companies")
}

model ColorType {
  id            Int           @id @default(autoincrement())
  name          String        @db.VarChar(50)
  slug          String        @unique @db.VarChar(50)
  category      ColorCategory
  technicalName String?       @map("technical_name") @db.VarChar(50)
  displayOrder  Int           @default(0) @map("display_order")
  createdAt     DateTime      @default(now()) @map("created_at")
  updatedAt     DateTime      @updatedAt @map("updated_at")
  movies        Movie[]

  @@index([category])
  @@index([slug])
  @@map("color_types")
}

model Location {
  id                  Int                 @id @default(autoincrement())
  name                String              @db.VarChar(255)
  slug                String              @unique @db.VarChar(255)
  parentId            Int?                @map("parent_id")
  latitude            Decimal?            @db.Decimal(10, 8)
  longitude           Decimal?            @db.Decimal(11, 8)
  createdAt           DateTime            @default(now()) @map("created_at")
  updatedAt           DateTime            @updatedAt @map("updated_at")
  gentilicio          String?             @db.VarChar(255)
  parent              Location?           @relation("LocationHierarchy", fields: [parentId], references: [id], onDelete: Restrict)
  children            Location[]          @relation("LocationHierarchy")
  movieCountries      MovieCountry[]      @relation("MovieCountries")
  peopleBornHere      Person[]            @relation("BirthLocation")
  peopleDiedHere      Person[]            @relation("DeathLocation")
  personNationalities PersonNationality[]
  festivals           Festival[]

  @@index([parentId])
  @@index([name])
  @@index([slug])
  @@map("locations")
}

model MovieVideo {
  id        Int       @id @default(autoincrement())
  movieId   Int       @map("movie_id")
  url       String    @db.VarChar(500)
  platform  String?   @db.VarChar(50)
  videoKey  String?   @map("video_key") @db.VarChar(100)
  type      VideoType
  title     String?   @db.VarChar(255)
  duration  Int?
  language  String    @default("es") @db.VarChar(10)
  isPrimary Boolean   @default(false) @map("is_primary")
  createdAt DateTime  @default(now()) @map("created_at")
  movie     Movie     @relation(fields: [movieId], references: [id], onDelete: Cascade)

  @@map("movie_videos")
}

model Award {
  id           Int          @id @default(autoincrement())
  name         String       @db.VarChar(255)
  organization String?      @db.VarChar(255)
  country      String?      @db.VarChar(100)
  description  String?
  logoUrl      String?      @map("logo_url") @db.VarChar(500)
  createdAt    DateTime     @default(now()) @map("created_at")
  movieAwards  MovieAward[]

  @@map("awards")
}

model MovieAward {
  id                Int         @id @default(autoincrement())
  movieId           Int         @map("movie_id")
  awardId           Int         @map("award_id")
  category          String      @db.VarChar(255)
  year              Int
  result            AwardResult
  recipientPersonId Int?        @map("recipient_person_id")
  notes             String?
  createdAt         DateTime    @default(now()) @map("created_at")
  award             Award       @relation(fields: [awardId], references: [id], onDelete: Cascade)
  movie             Movie       @relation(fields: [movieId], references: [id], onDelete: Cascade)
  recipient         Person?     @relation(fields: [recipientPersonId], references: [id])

  @@map("movie_awards")
}

model Theme {
  id          Int          @id @default(autoincrement())
  slug        String       @unique @db.VarChar(100)
  name        String       @db.VarChar(100)
  description String?
  usageCount  Int          @default(0) @map("usage_count")
  createdAt   DateTime     @default(now()) @map("created_at")
  movies      MovieTheme[]

  @@index([slug])
  @@index([name])
  @@map("themes")
}

model Role {
  id          Int         @id @default(autoincrement())
  name        String      @db.VarChar(100)
  slug        String      @unique @db.VarChar(100)
  department  Department
  description String?
  isMainRole  Boolean     @default(false) @map("is_main_role")
  isActive    Boolean     @default(true) @map("is_active")
  createdAt   DateTime    @default(now()) @map("created_at")
  updatedAt   DateTime    @updatedAt @map("updated_at")
  crewRoles   MovieCrew[]

  @@unique([name, department])
  @@index([department])
  @@index([isActive])
  @@index([isMainRole])
  @@map("roles")
}

model Rating {
  id           Int      @id @default(autoincrement())
  slug         String   @unique @db.VarChar(100)
  name         String   @unique @db.VarChar(255)
  abbreviation String?  @db.VarChar(10)
  description  String?
  order        Int      @default(0)
  createdAt    DateTime @default(now()) @map("created_at")
  updatedAt    DateTime @updatedAt @map("updated_at")
  movies       Movie[]

  @@index([slug])
  @@index([order])
  @@map("ratings")
}

model MovieTheme {
  movieId   Int   @map("movie_id")
  themeId   Int   @map("theme_id")
  relevance Int   @default(1)
  movie     Movie @relation(fields: [movieId], references: [id], onDelete: Cascade)
  theme     Theme @relation(fields: [themeId], references: [id], onDelete: Cascade)

  @@id([movieId, themeId])
  @@map("movie_themes")
}

model Session {
  id           String   @id @default(cuid())
  sessionToken String   @unique
  userId       String
  expires      DateTime
  user         User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("sessions")
}

model Account {
  id                String  @id @default(cuid())
  userId            String
  type              String
  provider          String
  providerAccountId String
  refresh_token     String?
  access_token      String?
  expires_at        Int?
  token_type        String?
  scope             String?
  id_token          String?
  session_state     String?
  user              User    @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([provider, providerAccountId])
  @@map("accounts")
}

model VerificationToken {
  identifier String
  token      String   @unique
  expires    DateTime

  @@unique([identifier, token])
  @@map("verification_tokens")
}

model MovieCountry {
  movieId   Int      @map("movie_id")
  countryId Int      @map("country_id")
  isPrimary Boolean  @default(false) @map("is_primary")
  location  Location @relation("MovieCountries", fields: [countryId], references: [id], onDelete: Cascade, onUpdate: NoAction)
  movie     Movie    @relation(fields: [movieId], references: [id], onDelete: Cascade)

  @@id([movieId, countryId])
  @@map("movie_countries")
}

model Language {
  id        Int      @id @default(autoincrement())
  code      String   @unique @db.VarChar(10)
  name      String   @db.VarChar(100)
  createdAt DateTime @default(now()) @map("created_at")

  @@map("languages")
}

model FirstNameGender {
  id        Int                 @id @default(autoincrement())
  name      String              @unique @db.VarChar(100)
  gender    FirstNameGenderType
  createdAt DateTime?           @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt DateTime?           @default(now()) @updatedAt @map("updated_at") @db.Timestamp(6)

  @@index([gender], map: "idx_first_name_genders_gender")
  @@index([name], map: "idx_first_name_genders_name")
  @@map("first_name_genders")
}

model User {
  id          String          @id @default(cuid())
  email       String          @unique @db.VarChar(255)
  username    String?         @unique @db.VarChar(100)
  displayName String?         @map("display_name") @db.VarChar(255)
  avatarUrl   String?         @map("avatar_url") @db.VarChar(500)
  bio         String?
  isActive    Boolean         @default(true) @map("is_active")
  isAdmin     Boolean         @default(false) @map("is_admin")
  createdAt   DateTime        @default(now()) @map("created_at")
  updatedAt   DateTime        @updatedAt @map("updated_at")
  password    String
  lastLogin   DateTime?       @map("last_login")
  role        UserRole        @default(VIEWER)
  accounts    Account[]
  auditLogs   AuditLog[]
  sessions    Session[]
  ratings     UserRating[]
  watched     UserWatched[]
  watchlist   UserWatchlist[]

  @@map("users")
}

model UserRating {
  userId     String   @map("user_id")
  movieId    Int      @map("movie_id")
  rating     Decimal  @db.Decimal(3, 1)
  reviewText String?  @map("review_text")
  createdAt  DateTime @default(now()) @map("created_at")
  updatedAt  DateTime @updatedAt @map("updated_at")
  movie      Movie    @relation(fields: [movieId], references: [id], onDelete: Cascade)
  user       User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@id([userId, movieId])
  @@map("user_ratings")
}

model UserWatchlist {
  userId  String   @map("user_id")
  movieId Int      @map("movie_id")
  addedAt DateTime @default(now()) @map("added_at")
  movie   Movie    @relation(fields: [movieId], references: [id], onDelete: Cascade)
  user    User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@id([userId, movieId])
  @@map("user_watchlist")
}

model UserWatched {
  userId    String   @map("user_id")
  movieId   Int      @map("movie_id")
  watchedAt DateTime @default(now()) @map("watched_at")
  movie     Movie    @relation(fields: [movieId], references: [id], onDelete: Cascade)
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@id([userId, movieId])
  @@map("user_watched")
}

model countries {
  id         Int      @id @default(autoincrement())
  code       String   @unique @db.VarChar(2)
  name       String   @db.VarChar(100)
  created_at DateTime @default(now())
}

model Image {
  id                 Int           @id @default(autoincrement())
  cloudinaryPublicId String        @unique @map("cloudinary_public_id") @db.VarChar(255)
  type               ImageType
  photoDate          DateTime?     @map("photo_date") @db.Timestamp(6)
  photographerCredit String?       @map("photographer_credit") @db.VarChar(255)
  eventName          String?       @map("event_name") @db.VarChar(255)
  movieId            Int?          @map("movie_id")
  createdAt          DateTime      @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt          DateTime      @default(now()) @updatedAt @map("updated_at") @db.Timestamp(6)
  people             ImagePerson[]
  movie              Movie?        @relation(fields: [movieId], references: [id], onDelete: SetNull, onUpdate: NoAction)

  @@index([photoDate], map: "idx_images_photo_date")
  @@map("images")
}

model ImagePerson {
  id       Int    @id @default(autoincrement())
  imageId  Int    @map("image_id")
  personId Int    @map("person_id")
  position Int    @default(0)
  image    Image  @relation(fields: [imageId], references: [id], onDelete: Cascade, onUpdate: NoAction)
  person   Person @relation(fields: [personId], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([imageId, personId])
  @@index([personId], map: "idx_image_people_person_id")
  @@map("image_people")
}

model PageView {
  id        Int       @id @default(autoincrement())
  pageType  PageType  @map("page_type")
  movieId   Int?      @map("movie_id")
  personId  Int?      @map("person_id")
  extraData Json?     @map("extra_data")
  sessionId String?   @map("session_id") @db.Uuid
  ipHash    String?   @map("ip_hash") @db.VarChar(64)
  userAgent String?   @map("user_agent") @db.VarChar(500)
  referrer  String?   @db.VarChar(500)
  createdAt DateTime? @default(now()) @map("created_at") @db.Timestamp(6)
  movie     Movie?    @relation(fields: [movieId], references: [id], onDelete: SetNull, onUpdate: NoAction)
  person    Person?   @relation(fields: [personId], references: [id], onDelete: SetNull, onUpdate: NoAction)

  @@index([pageType, createdAt], map: "idx_page_views_type_date")
  @@map("page_views")
}

model TmdbPendingMovie {
  id                  Int       @id @default(autoincrement())
  tmdbId              Int       @unique @map("tmdb_id")
  tmdbTitle           String    @map("tmdb_title") @db.VarChar(255)
  tmdbOriginalTitle   String?   @map("tmdb_original_title") @db.VarChar(255)
  tmdbYear            Int?      @map("tmdb_year")
  tmdbOverview        String?   @map("tmdb_overview")
  tmdbRuntime         Int?      @map("tmdb_runtime")
  tmdbDirectorName    String?   @map("tmdb_director_name") @db.VarChar(255)
  tmdbDirectorId      Int?      @map("tmdb_director_id")
  tmdbPopularity      Float?    @map("tmdb_popularity")
  tmdbPremiereInfo    String?   @map("tmdb_premiere_info") @db.VarChar(500)

  localMovieId        Int?      @map("local_movie_id")
  localMovieTitle     String?   @map("local_movie_title") @db.VarChar(255)
  localMovieYear      Int?      @map("local_movie_year")
  localDirectorName   String?   @map("local_director_name") @db.VarChar(255)
  
  status              String    @default("pending") @db.VarChar(20)
  actionType          String    @map("action_type") @db.VarChar(20)
  matchScore          Int?      @map("match_score")
  telegramMessageId   BigInt?   @map("telegram_message_id")
  
  createdAt           DateTime  @default(now()) @map("created_at") @db.Timestamptz
  processedAt         DateTime? @map("processed_at") @db.Timestamptz
  
  localMovie          Movie?    @relation(fields: [localMovieId], references: [id], onDelete: SetNull)
  
  @@index([status])
  @@index([tmdbId])
  @@index([createdAt])
  @@map("tmdb_pending_movies")
}

enum ImageType {
  STILL
  BEHIND_THE_SCENES
  PUBLICITY
  EVENT
  PREMIERE
}

enum UserRole {
  ADMIN
  EDITOR
  VIEWER
}

enum Department {
  DIRECCION
  PRODUCCION
  GUION
  FOTOGRAFIA
  ARTE
  MONTAJE
  SONIDO
  MUSICA
  VESTUARIO
  MAQUILLAJE
  EFECTOS
  ANIMACION
  POSTPRODUCCION
  OTROS
}

enum Gender {
  MALE
  FEMALE
  OTHER

  @@map("gender")
}

enum FirstNameGenderType {
  MALE
  FEMALE
  UNISEX

  @@map("first_name_gender_type")
}

enum PersonLinkType {
  IMDB
  TMDB
  CINENACIONAL
  WIKIPEDIA
  OFFICIAL_WEBSITE
  PORTFOLIO
  BLOG
  INSTAGRAM
  TWITTER
  FACEBOOK
  YOUTUBE
  TIKTOK
  LINKEDIN
  VIMEO
  LETTERBOXD
  SPOTIFY
  PODCAST
  INTERVIEW
  ARTICLE
  OTHER

  @@map("person_link_type")
}

enum VenueType {
  CINEMA
  STREAMING
  TV_CHANNEL
  OTHER

  @@map("venue_type")
}

enum VideoType {
  TRAILER
  TEASER
  BEHIND_SCENES
  INTERVIEW
  CLIP

  @@map("video_type")
}

enum AwardResult {
  WON
  NOMINATED

  @@map("award_result")
}

enum DataCompleteness {
  BASIC_PRESS_KIT
  FULL_PRESS_KIT
  MAIN_CAST
  MAIN_CREW
  FULL_CAST
  FULL_CREW

  @@map("data_completeness")
}

enum LinkType {
  INSTAGRAM
  TWITTER
  FACEBOOK
  TIKTOK
  YOUTUBE
  WEBSITE

  @@map("link_type")
}

enum ColorCategory {
  COLOR
  BLACK_AND_WHITE
  MIXED
  UNKNOWN

  @@map("color_category")
}

enum MovieStage {
  COMPLETA
  EN_DESARROLLO
  EN_POSTPRODUCCION
  EN_PREPRODUCCION
  EN_PRODUCCION
  EN_RODAJE
  INCONCLUSA
  INEDITA

  @@map("movie_stage")
}

enum PageType {
  HOME
  MOVIE
  PERSON
  EPHEMERIS
  PERSON_LIST
  RELEASES
  OBITUARIES

  @@map("page_type")
}

enum image_type {
  POSTER
  BACKDROP
  STILL
  BEHIND_SCENES
}

// ============================================
// ENUMS DE FESTIVALES
// ============================================

enum PremiereType {
  WORLD_PREMIERE
  INTERNATIONAL_PREMIERE
  NATIONAL_PREMIERE
  REGIONAL_PREMIERE
  REGULAR

  @@map("premiere_type")
}

enum FestivalAwardType {
  FILM
  PERSON
  TECHNICAL
  HONORARY
  AUDIENCE

  @@map("festival_award_type")
}

// ============================================
// MODELOS DE FESTIVALES
// ============================================

model Festival {
  id          Int               @id @default(autoincrement())
  slug        String            @unique @db.VarChar(255)
  name        String            @db.VarChar(255)
  shortName   String?           @map("short_name") @db.VarChar(100)
  description String?
  logoUrl     String?           @map("logo_url") @db.VarChar(500)
  website     String?           @db.VarChar(500)
  locationId  Int               @map("location_id")
  foundedYear Int?              @map("founded_year")
  isActive    Boolean           @default(true) @map("is_active")
  createdAt   DateTime          @default(now()) @map("created_at")
  updatedAt   DateTime          @updatedAt @map("updated_at")

  location         Location                  @relation(fields: [locationId], references: [id])
  editions         FestivalEdition[]
  awards           FestivalAward[]
  sectionTemplates FestivalSectionTemplate[]

  @@index([slug])
  @@index([name])
  @@index([locationId])
  @@index([isActive])
  @@map("festivals")
}

model FestivalEdition {
  id            Int      @id @default(autoincrement())
  festivalId    Int      @map("festival_id")
  editionNumber Int      @map("edition_number")
  year          Int
  startDate     DateTime @map("start_date") @db.Date
  endDate       DateTime @map("end_date") @db.Date
  theme         String?  @db.VarChar(255)
  description   String?
  posterUrl     String?  @map("poster_url") @db.VarChar(500)
  websiteUrl    String?  @map("website_url") @db.VarChar(500)
  isPublished   Boolean  @default(false) @map("is_published")
  createdAt     DateTime @default(now()) @map("created_at")
  updatedAt     DateTime @updatedAt @map("updated_at")

  festival     Festival              @relation(fields: [festivalId], references: [id], onDelete: Cascade)
  sections     FestivalSection[]
  screenings   FestivalScreening[]
  awardWinners FestivalAwardWinner[]

  @@unique([festivalId, editionNumber])
  @@unique([festivalId, year])
  @@index([festivalId])
  @@index([year])
  @@index([startDate])
  @@index([endDate])
  @@index([isPublished])
  @@map("festival_editions")
}

model FestivalSectionTemplate {
  id            Int      @id @default(autoincrement())
  festivalId    Int      @map("festival_id")
  slug          String   @db.VarChar(255)
  name          String   @db.VarChar(255)
  description   String?
  isCompetitive Boolean  @default(false) @map("is_competitive")
  displayOrder  Int      @default(0) @map("display_order")
  isActive      Boolean  @default(true) @map("is_active")
  createdAt     DateTime @default(now()) @map("created_at")
  updatedAt     DateTime @updatedAt @map("updated_at")

  festival Festival          @relation(fields: [festivalId], references: [id], onDelete: Cascade)
  sections FestivalSection[]

  @@unique([festivalId, slug])
  @@index([festivalId])
  @@index([isActive])
  @@map("festival_section_templates")
}

model FestivalSection {
  id            Int      @id @default(autoincrement())
  editionId     Int      @map("edition_id")
  templateId    Int?     @map("template_id")
  slug          String   @db.VarChar(255)
  name          String   @db.VarChar(255)
  description   String?
  isCompetitive Boolean  @default(false) @map("is_competitive")
  displayOrder  Int      @default(0) @map("display_order")
  createdAt     DateTime @default(now()) @map("created_at")
  updatedAt     DateTime @updatedAt @map("updated_at")

  edition     FestivalEdition          @relation(fields: [editionId], references: [id], onDelete: Cascade)
  template    FestivalSectionTemplate? @relation(fields: [templateId], references: [id], onDelete: SetNull)
  juryMembers FestivalJury[]
  screenings  FestivalScreening[]

  @@unique([editionId, slug])
  @@index([editionId])
  @@index([templateId])
  @@index([isCompetitive])
  @@map("festival_sections")
}

model FestivalJury {
  id           Int      @id @default(autoincrement())
  sectionId    Int      @map("section_id")
  personId     Int      @map("person_id")
  role         String?  @db.VarChar(100)
  billingOrder Int      @default(0) @map("billing_order")
  createdAt    DateTime @default(now()) @map("created_at")

  section FestivalSection @relation(fields: [sectionId], references: [id], onDelete: Cascade)
  person  Person          @relation(fields: [personId], references: [id], onDelete: Cascade)

  @@unique([sectionId, personId])
  @@index([sectionId])
  @@index([personId])
  @@map("festival_jury")
}

model FestivalScreening {
  id            Int          @id @default(autoincrement())
  editionId     Int          @map("edition_id")
  sectionId     Int          @map("section_id")
  movieId       Int          @map("movie_id")
  screeningDate DateTime     @map("screening_date") @db.Date
  screeningTime DateTime?    @map("screening_time") @db.Time
  venueId       Int?         @map("venue_id")
  premiereType  PremiereType @default(REGULAR) @map("premiere_type")
  isOfficial    Boolean      @default(true) @map("is_official")
  notes         String?
  createdAt     DateTime     @default(now()) @map("created_at")
  updatedAt     DateTime     @updatedAt @map("updated_at")

  edition FestivalEdition @relation(fields: [editionId], references: [id], onDelete: Cascade)
  section FestivalSection @relation(fields: [sectionId], references: [id], onDelete: Cascade)
  movie   Movie           @relation(fields: [movieId], references: [id], onDelete: Cascade)
  venue   ScreeningVenue? @relation(fields: [venueId], references: [id])

  @@index([editionId])
  @@index([sectionId])
  @@index([movieId])
  @@index([screeningDate])
  @@index([premiereType])
  @@index([venueId])
  @@index([editionId, sectionId])
  @@index([editionId, screeningDate])
  @@map("festival_screenings")
}

model FestivalAward {
  id           Int               @id @default(autoincrement())
  festivalId   Int               @map("festival_id")
  slug         String            @db.VarChar(255)
  name         String            @db.VarChar(255)
  description  String?
  awardType    FestivalAwardType @default(FILM) @map("award_type")
  isActive     Boolean           @default(true) @map("is_active")
  displayOrder Int               @default(0) @map("display_order")
  createdAt    DateTime          @default(now()) @map("created_at")
  updatedAt    DateTime          @updatedAt @map("updated_at")

  festival Festival              @relation(fields: [festivalId], references: [id], onDelete: Cascade)
  winners  FestivalAwardWinner[]

  @@unique([festivalId, slug])
  @@index([festivalId])
  @@index([awardType])
  @@index([isActive])
  @@map("festival_awards")
}

model FestivalAwardWinner {
  id        Int         @id @default(autoincrement())
  awardId   Int         @map("award_id")
  editionId Int         @map("edition_id")
  movieId   Int?        @map("movie_id")
  personId  Int?        @map("person_id")
  result    AwardResult @default(WON)
  citation  String?     @db.VarChar(500)
  notes     String?
  createdAt DateTime    @default(now()) @map("created_at")
  updatedAt DateTime    @updatedAt @map("updated_at")

  award   FestivalAward   @relation(fields: [awardId], references: [id], onDelete: Cascade)
  edition FestivalEdition @relation(fields: [editionId], references: [id], onDelete: Cascade)
  movie   Movie?          @relation(fields: [movieId], references: [id], onDelete: Cascade)
  person  Person?         @relation(fields: [personId], references: [id], onDelete: Cascade)

  @@index([awardId])
  @@index([editionId])
  @@index([movieId])
  @@index([personId])
  @@index([result])
  @@index([editionId, awardId])
  @@map("festival_award_winners")
}

```

## SQL Generado

```sql
-- CreateEnum
CREATE TYPE "ImageType" AS ENUM ('STILL', 'BEHIND_THE_SCENES', 'PUBLICITY', 'EVENT', 'PREMIERE');

-- CreateEnum
CREATE TYPE "UserRole" AS ENUM ('ADMIN', 'EDITOR', 'VIEWER');

-- CreateEnum
CREATE TYPE "Department" AS ENUM ('DIRECCION', 'PRODUCCION', 'GUION', 'FOTOGRAFIA', 'ARTE', 'MONTAJE', 'SONIDO', 'MUSICA', 'VESTUARIO', 'MAQUILLAJE', 'EFECTOS', 'ANIMACION', 'POSTPRODUCCION', 'OTROS');

-- CreateEnum
CREATE TYPE "gender" AS ENUM ('MALE', 'FEMALE', 'OTHER');

-- CreateEnum
CREATE TYPE "first_name_gender_type" AS ENUM ('MALE', 'FEMALE', 'UNISEX');

-- CreateEnum
CREATE TYPE "person_link_type" AS ENUM ('IMDB', 'TMDB', 'CINENACIONAL', 'WIKIPEDIA', 'OFFICIAL_WEBSITE', 'PORTFOLIO', 'BLOG', 'INSTAGRAM', 'TWITTER', 'FACEBOOK', 'YOUTUBE', 'TIKTOK', 'LINKEDIN', 'VIMEO', 'LETTERBOXD', 'SPOTIFY', 'PODCAST', 'INTERVIEW', 'ARTICLE', 'OTHER');

-- CreateEnum
CREATE TYPE "venue_type" AS ENUM ('CINEMA', 'STREAMING', 'TV_CHANNEL', 'OTHER');

-- CreateEnum
CREATE TYPE "video_type" AS ENUM ('TRAILER', 'TEASER', 'BEHIND_SCENES', 'INTERVIEW', 'CLIP');

-- CreateEnum
CREATE TYPE "award_result" AS ENUM ('WON', 'NOMINATED');

-- CreateEnum
CREATE TYPE "data_completeness" AS ENUM ('BASIC_PRESS_KIT', 'FULL_PRESS_KIT', 'MAIN_CAST', 'MAIN_CREW', 'FULL_CAST', 'FULL_CREW');

-- CreateEnum
CREATE TYPE "link_type" AS ENUM ('INSTAGRAM', 'TWITTER', 'FACEBOOK', 'TIKTOK', 'YOUTUBE', 'WEBSITE');

-- CreateEnum
CREATE TYPE "color_category" AS ENUM ('COLOR', 'BLACK_AND_WHITE', 'MIXED', 'UNKNOWN');

-- CreateEnum
CREATE TYPE "movie_stage" AS ENUM ('COMPLETA', 'EN_DESARROLLO', 'EN_POSTPRODUCCION', 'EN_PREPRODUCCION', 'EN_PRODUCCION', 'EN_RODAJE', 'INCONCLUSA', 'INEDITA');

-- CreateEnum
CREATE TYPE "page_type" AS ENUM ('HOME', 'MOVIE', 'PERSON', 'EPHEMERIS', 'PERSON_LIST', 'RELEASES', 'OBITUARIES');

-- CreateEnum
CREATE TYPE "image_type" AS ENUM ('POSTER', 'BACKDROP', 'STILL', 'BEHIND_SCENES');

-- CreateEnum
CREATE TYPE "premiere_type" AS ENUM ('WORLD_PREMIERE', 'INTERNATIONAL_PREMIERE', 'NATIONAL_PREMIERE', 'REGIONAL_PREMIERE', 'REGULAR');

-- CreateEnum
CREATE TYPE "festival_award_type" AS ENUM ('FILM', 'PERSON', 'TECHNICAL', 'HONORARY', 'AUDIENCE');

-- CreateTable
CREATE TABLE "movies" (
    "id" SERIAL NOT NULL,
    "slug" VARCHAR(255) NOT NULL,
    "title" VARCHAR(255) NOT NULL,
    "year" INTEGER,
    "release_year" INTEGER,
    "release_month" SMALLINT,
    "release_day" SMALLINT,
    "duration" INTEGER,
    "duration_seconds" INTEGER,
    "tipo_duracion" VARCHAR(20),
    "synopsis" TEXT,
    "notes" TEXT,
    "tagline" VARCHAR(500),
    "poster_url" VARCHAR(500),
    "poster_public_id" VARCHAR(500),
    "trailer_url" VARCHAR(500),
    "imdb_id" VARCHAR(20),
    "stage" "movie_stage" NOT NULL DEFAULT 'COMPLETA',
    "color_type_id" INTEGER,
    "sound_type" VARCHAR(50),
    "rating_id" INTEGER,
    "countries" TEXT[] DEFAULT ARRAY['Argentina']::TEXT[],
    "is_coproduction" BOOLEAN NOT NULL DEFAULT false,
    "production_type" TEXT NOT NULL DEFAULT 'national',
    "filming_start_year" INTEGER,
    "filming_start_month" SMALLINT,
    "filming_start_day" SMALLINT,
    "filming_end_year" INTEGER,
    "filming_end_month" SMALLINT,
    "filming_end_day" SMALLINT,
    "created_at" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updated_at" TIMESTAMP(3) NOT NULL,
    "data_completeness" "data_completeness" NOT NULL DEFAULT 'BASIC_PRESS_KIT',
    "meta_description" TEXT,
    "meta_keywords" TEXT[],
    "synopsis_locked" BOOLEAN NOT NULL DEFAULT false,
    "tmdb_id" INTEGER,
    "imdb_votes" INTEGER,
    "imdb_votes_updated_at" TIMESTAMPTZ,

    CONSTRAINT "movies_pkey" PRIMARY KEY ("id")
);

-- CreateTable
CREATE TABLE "screening_venues" (
    "id" SERIAL NOT NULL,
    "slug" VARCHAR(255) NOT NULL,
    "name" VARCHAR(255) NOT NULL,
    "type" "venue_type" NOT NULL,
    "description" TEXT,
    "logo_url" VARCHAR(500),
    "website" VARCHAR(500),
    "address" VARCHAR(500),
    "city" VARCHAR(100),
    "province" VARCHAR(100),
    "country" VARCHAR(100) DEFAULT 'Argentina',
    "latitude" DECIMAL(10,8),
    "longitude" DECIMAL(11,8),
    "is_active" BOOLEAN NOT NULL DEFAULT true,
    "created_at" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updated_at" TIMESTAMP(3) NOT NULL,

    CONSTRAINT "screening_venues_pkey" PRIMARY KEY ("id")
);

-- CreateTable
CREATE TABLE "audit_logs" (
    "id" TEXT NOT NULL,
    "user_id" TEXT NOT NULL,
    "action" TEXT NOT NULL,
    "entity" TEXT,
    "entityId" TEXT,
    "metadata" JSONB,
    "ip" TEXT,
    "userAgent" TEXT,
    "createdAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,

    CONSTRAINT "audit_logs_pkey" PRIMARY KEY ("id")
);

-- CreateTable
CREATE TABLE "movie_screenings" (
    "id" SERIAL NOT NULL,
    "movie_id" INTEGER NOT NULL,
    "venue_id" INTEGER NOT NULL,
    "screening_date" DATE,
    "end_date" DATE,
    "is_premiere" BOOLEAN NOT NULL DEFAULT false,
    "is_exclusive" BOOLEAN NOT NULL DEFAULT false,
    "notes" TEXT,
    "created_at" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,

    CONSTRAINT "movie_screenings_pkey" PRIMARY KEY ("id")
);

-- CreateTable
CREATE TABLE "movie_alternative_titles" (
    "id" SERIAL NOT NULL,
    "movie_id" INTEGER NOT NULL,
    "title" VARCHAR(255) NOT NULL,
    "description" TEXT,
    "created_at" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,

    CONSTRAINT "movie_alternative_titles_pkey" PRIMARY KEY ("id")
);

-- CreateTable
CREATE TABLE "movie_links" (
    "id" SERIAL NOT NULL,
    "movie_id" INTEGER NOT NULL,
    "type" "link_type" NOT NULL,
    "url" TEXT NOT NULL,
    "title" VARCHAR(255),
    "is_active" BOOLEAN NOT NULL DEFAULT true,
    "created_at" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updated_at" TIMESTAMP(3) NOT NULL,

    CONSTRAINT "movie_links_pkey" PRIMARY KEY ("id")
);

-- CreateTable
CREATE TABLE "people" (
    "id" SERIAL NOT NULL,
    "slug" VARCHAR(255) NOT NULL,
    "first_name" VARCHAR(255),
    "last_name" VARCHAR(255),
    "real_name" VARCHAR(255),
    "birth_year" INTEGER,
    "birth_month" SMALLINT,
    "birth_day" SMALLINT,
    "death_year" INTEGER,
    "death_month" SMALLINT,
    "death_day" SMALLINT,
    "birth_location_id" INTEGER,
    "death_location_id" INTEGER,
    "biography" TEXT,
    "photo_url" VARCHAR(500),
    "gender" "gender",
    "hide_age" BOOLEAN NOT NULL DEFAULT false,
    "has_links" BOOLEAN NOT NULL DEFAULT false,
    "is_active" BOOLEAN NOT NULL DEFAULT true,
    "created_at" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updated_at" TIMESTAMP(3) NOT NULL,
    "photo_public_id" VARCHAR(255),
    "imdb_id" VARCHAR(20),
    "tmdb_id" INTEGER,
    "tmdb_popularity" DOUBLE PRECISION,
    "tmdb_popularity_updated_at" TIMESTAMPTZ,

    CONSTRAINT "people_pkey" PRIMARY KEY ("id")
);

-- CreateTable
CREATE TABLE "people_alternative_names" (
    "id" SERIAL NOT NULL,
    "person_id" INTEGER NOT NULL,
    "full_name" VARCHAR(255) NOT NULL,
    "created_at" TIMESTAMP(6) DEFAULT CURRENT_TIMESTAMP,
    "updated_at" TIMESTAMP(6) DEFAULT CURRENT_TIMESTAMP,

    CONSTRAINT "people_alternative_names_pkey" PRIMARY KEY ("id")
);

-- CreateTable
CREATE TABLE "person_nationalities" (
    "person_id" INTEGER NOT NULL,
    "location_id" INTEGER NOT NULL,
    "is_primary" BOOLEAN NOT NULL DEFAULT false,

    CONSTRAINT "person_nationalities_pkey" PRIMARY KEY ("person_id","location_id")
);

-- CreateTable
CREATE TABLE "movie_stats" (
    "movie_id" INTEGER NOT NULL,
    "views_week" INTEGER DEFAULT 0,
    "views_month" INTEGER DEFAULT 0,
    "views_year" INTEGER DEFAULT 0,
    "views_total" INTEGER DEFAULT 0,
    "updated_at" TIMESTAMP(6) DEFAULT CURRENT_TIMESTAMP,

    CONSTRAINT "movie_stats_pkey" PRIMARY KEY ("movie_id")
);

-- CreateTable
CREATE TABLE "person_links" (
    "id" SERIAL NOT NULL,
    "person_id" INTEGER NOT NULL,
    "type" "person_link_type" NOT NULL,
    "url" VARCHAR(500) NOT NULL,
    "title" VARCHAR(255),
    "display_order" INTEGER NOT NULL DEFAULT 0,
    "is_verified" BOOLEAN NOT NULL DEFAULT false,
    "is_active" BOOLEAN NOT NULL DEFAULT true,
    "last_checked" TIMESTAMP(3),
    "created_at" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updated_at" TIMESTAMP(3) NOT NULL,

    CONSTRAINT "person_links_pkey" PRIMARY KEY ("id")
);

-- CreateTable
CREATE TABLE "genres" (
    "id" SERIAL NOT NULL,
    "slug" VARCHAR(100) NOT NULL,
    "name" VARCHAR(100) NOT NULL,
    "description" TEXT,
    "created_at" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,

    CONSTRAINT "genres_pkey" PRIMARY KEY ("id")
);

-- CreateTable
CREATE TABLE "production_companies" (
    "id" SERIAL NOT NULL,
    "slug" VARCHAR(255) NOT NULL,
    "name" VARCHAR(255) NOT NULL,
    "description" TEXT,
    "founded_year" INTEGER,
    "logo_url" VARCHAR(500),
    "website" VARCHAR(500),
    "country" VARCHAR(100),
    "created_at" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updated_at" TIMESTAMP(3) NOT NULL,

    CONSTRAINT "production_companies_pkey" PRIMARY KEY ("id")
);

-- CreateTable
CREATE TABLE "distribution_companies" (
    "id" SERIAL NOT NULL,
    "slug" VARCHAR(255) NOT NULL,
    "name" VARCHAR(255) NOT NULL,
    "description" TEXT,
    "logo_url" VARCHAR(500),
    "website" VARCHAR(500),
    "country" VARCHAR(100),
    "created_at" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updated_at" TIMESTAMP(3) NOT NULL,

    CONSTRAINT "distribution_companies_pkey" PRIMARY KEY ("id")
);

-- CreateTable
CREATE TABLE "movie_cast" (
    "id" SERIAL NOT NULL,
    "movie_id" INTEGER NOT NULL,
    "person_id" INTEGER NOT NULL,
    "character_name" VARCHAR(255),
    "billing_order" INTEGER,
    "is_principal" BOOLEAN NOT NULL DEFAULT false,
    "notes" TEXT,
    "created_at" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "is_actor" BOOLEAN NOT NULL DEFAULT true,
    "alternative_name_id" INTEGER,

    CONSTRAINT "movie_cast_pkey" PRIMARY KEY ("id")
);

-- CreateTable
CREATE TABLE "movie_crew" (
    "id" SERIAL NOT NULL,
    "movie_id" INTEGER NOT NULL,
    "person_id" INTEGER NOT NULL,
    "role_id" INTEGER NOT NULL,
    "billing_order" INTEGER,
    "notes" TEXT,
    "created_at" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updated_at" TIMESTAMP(3) NOT NULL,
    "alternative_name_id" INTEGER,

    CONSTRAINT "movie_crew_pkey" PRIMARY KEY ("id")
);

-- CreateTable
CREATE TABLE "movie_genres" (
    "movie_id" INTEGER NOT NULL,
    "genre_id" INTEGER NOT NULL,
    "is_primary" BOOLEAN NOT NULL DEFAULT false,

    CONSTRAINT "movie_genres_pkey" PRIMARY KEY ("movie_id","genre_id")
);

-- CreateTable
CREATE TABLE "movie_production_companies" (
    "movie_id" INTEGER NOT NULL,
    "company_id" INTEGER NOT NULL,
    "is_primary" BOOLEAN NOT NULL DEFAULT false,

    CONSTRAINT "movie_production_companies_pkey" PRIMARY KEY ("movie_id","company_id")
);

-- CreateTable
CREATE TABLE "movie_distribution_companies" (
    "movie_id" INTEGER NOT NULL,
    "company_id" INTEGER NOT NULL,
    "territory" VARCHAR(100) NOT NULL DEFAULT 'Argentina',

    CONSTRAINT "movie_distribution_companies_pkey" PRIMARY KEY ("movie_id","company_id","territory")
);

-- CreateTable
CREATE TABLE "color_types" (
    "id" SERIAL NOT NULL,
    "name" VARCHAR(50) NOT NULL,
    "slug" VARCHAR(50) NOT NULL,
    "category" "color_category" NOT NULL,
    "technical_name" VARCHAR(50),
    "display_order" INTEGER NOT NULL DEFAULT 0,
    "created_at" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updated_at" TIMESTAMP(3) NOT NULL,

    CONSTRAINT "color_types_pkey" PRIMARY KEY ("id")
);

-- CreateTable
CREATE TABLE "locations" (
    "id" SERIAL NOT NULL,
    "name" VARCHAR(255) NOT NULL,
    "slug" VARCHAR(255) NOT NULL,
    "parent_id" INTEGER,
    "latitude" DECIMAL(10,8),
    "longitude" DECIMAL(11,8),
    "created_at" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updated_at" TIMESTAMP(3) NOT NULL,
    "gentilicio" VARCHAR(255),

    CONSTRAINT "locations_pkey" PRIMARY KEY ("id")
);

-- CreateTable
CREATE TABLE "movie_videos" (
    "id" SERIAL NOT NULL,
    "movie_id" INTEGER NOT NULL,
    "url" VARCHAR(500) NOT NULL,
    "platform" VARCHAR(50),
    "video_key" VARCHAR(100),
    "type" "video_type" NOT NULL,
    "title" VARCHAR(255),
    "duration" INTEGER,
    "language" VARCHAR(10) NOT NULL DEFAULT 'es',
    "is_primary" BOOLEAN NOT NULL DEFAULT false,
    "created_at" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,

    CONSTRAINT "movie_videos_pkey" PRIMARY KEY ("id")
);

-- CreateTable
CREATE TABLE "awards" (
    "id" SERIAL NOT NULL,
    "name" VARCHAR(255) NOT NULL,
    "organization" VARCHAR(255),
    "country" VARCHAR(100),
    "description" TEXT,
    "logo_url" VARCHAR(500),
    "created_at" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,

    CONSTRAINT "awards_pkey" PRIMARY KEY ("id")
);

-- CreateTable
CREATE TABLE "movie_awards" (
    "id" SERIAL NOT NULL,
    "movie_id" INTEGER NOT NULL,
    "award_id" INTEGER NOT NULL,
    "category" VARCHAR(255) NOT NULL,
    "year" INTEGER NOT NULL,
    "result" "award_result" NOT NULL,
    "recipient_person_id" INTEGER,
    "notes" TEXT,
    "created_at" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,

    CONSTRAINT "movie_awards_pkey" PRIMARY KEY ("id")
);

-- CreateTable
CREATE TABLE "themes" (
    "id" SERIAL NOT NULL,
    "slug" VARCHAR(100) NOT NULL,
    "name" VARCHAR(100) NOT NULL,
    "description" TEXT,
    "usage_count" INTEGER NOT NULL DEFAULT 0,
    "created_at" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,

    CONSTRAINT "themes_pkey" PRIMARY KEY ("id")
);

-- CreateTable
CREATE TABLE "roles" (
    "id" SERIAL NOT NULL,
    "name" VARCHAR(100) NOT NULL,
    "slug" VARCHAR(100) NOT NULL,
    "department" "Department" NOT NULL,
    "description" TEXT,
    "is_main_role" BOOLEAN NOT NULL DEFAULT false,
    "is_active" BOOLEAN NOT NULL DEFAULT true,
    "created_at" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updated_at" TIMESTAMP(3) NOT NULL,

    CONSTRAINT "roles_pkey" PRIMARY KEY ("id")
);

-- CreateTable
CREATE TABLE "ratings" (
    "id" SERIAL NOT NULL,
    "slug" VARCHAR(100) NOT NULL,
    "name" VARCHAR(255) NOT NULL,
    "abbreviation" VARCHAR(10),
    "description" TEXT,
    "order" INTEGER NOT NULL DEFAULT 0,
    "created_at" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updated_at" TIMESTAMP(3) NOT NULL,

    CONSTRAINT "ratings_pkey" PRIMARY KEY ("id")
);

-- CreateTable
CREATE TABLE "movie_themes" (
    "movie_id" INTEGER NOT NULL,
    "theme_id" INTEGER NOT NULL,
    "relevance" INTEGER NOT NULL DEFAULT 1,

    CONSTRAINT "movie_themes_pkey" PRIMARY KEY ("movie_id","theme_id")
);

-- CreateTable
CREATE TABLE "sessions" (
    "id" TEXT NOT NULL,
    "sessionToken" TEXT NOT NULL,
    "userId" TEXT NOT NULL,
    "expires" TIMESTAMP(3) NOT NULL,

    CONSTRAINT "sessions_pkey" PRIMARY KEY ("id")
);

-- CreateTable
CREATE TABLE "accounts" (
    "id" TEXT NOT NULL,
    "userId" TEXT NOT NULL,
    "type" TEXT NOT NULL,
    "provider" TEXT NOT NULL,
    "providerAccountId" TEXT NOT NULL,
    "refresh_token" TEXT,
    "access_token" TEXT,
    "expires_at" INTEGER,
    "token_type" TEXT,
    "scope" TEXT,
    "id_token" TEXT,
    "session_state" TEXT,

    CONSTRAINT "accounts_pkey" PRIMARY KEY ("id")
);

-- CreateTable
CREATE TABLE "verification_tokens" (
    "identifier" TEXT NOT NULL,
    "token" TEXT NOT NULL,
    "expires" TIMESTAMP(3) NOT NULL
);

-- CreateTable
CREATE TABLE "movie_countries" (
    "movie_id" INTEGER NOT NULL,
    "country_id" INTEGER NOT NULL,
    "is_primary" BOOLEAN NOT NULL DEFAULT false,

    CONSTRAINT "movie_countries_pkey" PRIMARY KEY ("movie_id","country_id")
);

-- CreateTable
CREATE TABLE "languages" (
    "id" SERIAL NOT NULL,
    "code" VARCHAR(10) NOT NULL,
    "name" VARCHAR(100) NOT NULL,
    "created_at" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,

    CONSTRAINT "languages_pkey" PRIMARY KEY ("id")
);

-- CreateTable
CREATE TABLE "first_name_genders" (
    "id" SERIAL NOT NULL,
    "name" VARCHAR(100) NOT NULL,
    "gender" "first_name_gender_type" NOT NULL,
    "created_at" TIMESTAMP(6) DEFAULT CURRENT_TIMESTAMP,
    "updated_at" TIMESTAMP(6) DEFAULT CURRENT_TIMESTAMP,

    CONSTRAINT "first_name_genders_pkey" PRIMARY KEY ("id")
);

-- CreateTable
CREATE TABLE "users" (
    "id" TEXT NOT NULL,
    "email" VARCHAR(255) NOT NULL,
    "username" VARCHAR(100),
    "display_name" VARCHAR(255),
    "avatar_url" VARCHAR(500),
    "bio" TEXT,
    "is_active" BOOLEAN NOT NULL DEFAULT true,
    "is_admin" BOOLEAN NOT NULL DEFAULT false,
    "created_at" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updated_at" TIMESTAMP(3) NOT NULL,
    "password" TEXT NOT NULL,
    "last_login" TIMESTAMP(3),
    "role" "UserRole" NOT NULL DEFAULT 'VIEWER',

    CONSTRAINT "users_pkey" PRIMARY KEY ("id")
);

-- CreateTable
CREATE TABLE "user_ratings" (
    "user_id" TEXT NOT NULL,
    "movie_id" INTEGER NOT NULL,
    "rating" DECIMAL(3,1) NOT NULL,
    "review_text" TEXT,
    "created_at" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updated_at" TIMESTAMP(3) NOT NULL,

    CONSTRAINT "user_ratings_pkey" PRIMARY KEY ("user_id","movie_id")
);

-- CreateTable
CREATE TABLE "user_watchlist" (
    "user_id" TEXT NOT NULL,
    "movie_id" INTEGER NOT NULL,
    "added_at" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,

    CONSTRAINT "user_watchlist_pkey" PRIMARY KEY ("user_id","movie_id")
);

-- CreateTable
CREATE TABLE "user_watched" (
    "user_id" TEXT NOT NULL,
    "movie_id" INTEGER NOT NULL,
    "watched_at" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,

    CONSTRAINT "user_watched_pkey" PRIMARY KEY ("user_id","movie_id")
);

-- CreateTable
CREATE TABLE "countries" (
    "id" SERIAL NOT NULL,
    "code" VARCHAR(2) NOT NULL,
    "name" VARCHAR(100) NOT NULL,
    "created_at" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,

    CONSTRAINT "countries_pkey" PRIMARY KEY ("id")
);

-- CreateTable
CREATE TABLE "images" (
    "id" SERIAL NOT NULL,
    "cloudinary_public_id" VARCHAR(255) NOT NULL,
    "type" "ImageType" NOT NULL,
    "photo_date" TIMESTAMP(6),
    "photographer_credit" VARCHAR(255),
    "event_name" VARCHAR(255),
    "movie_id" INTEGER,
    "created_at" TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updated_at" TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP,

    CONSTRAINT "images_pkey" PRIMARY KEY ("id")
);

-- CreateTable
CREATE TABLE "image_people" (
    "id" SERIAL NOT NULL,
    "image_id" INTEGER NOT NULL,
    "person_id" INTEGER NOT NULL,
    "position" INTEGER NOT NULL DEFAULT 0,

    CONSTRAINT "image_people_pkey" PRIMARY KEY ("id")
);

-- CreateTable
CREATE TABLE "page_views" (
    "id" SERIAL NOT NULL,
    "page_type" "page_type" NOT NULL,
    "movie_id" INTEGER,
    "person_id" INTEGER,
    "extra_data" JSONB,
    "session_id" UUID,
    "ip_hash" VARCHAR(64),
    "user_agent" VARCHAR(500),
    "referrer" VARCHAR(500),
    "created_at" TIMESTAMP(6) DEFAULT CURRENT_TIMESTAMP,

    CONSTRAINT "page_views_pkey" PRIMARY KEY ("id")
);

-- CreateTable
CREATE TABLE "tmdb_pending_movies" (
    "id" SERIAL NOT NULL,
    "tmdb_id" INTEGER NOT NULL,
    "tmdb_title" VARCHAR(255) NOT NULL,
    "tmdb_original_title" VARCHAR(255),
    "tmdb_year" INTEGER,
    "tmdb_overview" TEXT,
    "tmdb_runtime" INTEGER,
    "tmdb_director_name" VARCHAR(255),
    "tmdb_director_id" INTEGER,
    "tmdb_popularity" DOUBLE PRECISION,
    "tmdb_premiere_info" VARCHAR(500),
    "local_movie_id" INTEGER,
    "local_movie_title" VARCHAR(255),
    "local_movie_year" INTEGER,
    "local_director_name" VARCHAR(255),
    "status" VARCHAR(20) NOT NULL DEFAULT 'pending',
    "action_type" VARCHAR(20) NOT NULL,
    "match_score" INTEGER,
    "telegram_message_id" BIGINT,
    "created_at" TIMESTAMPTZ NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "processed_at" TIMESTAMPTZ,

    CONSTRAINT "tmdb_pending_movies_pkey" PRIMARY KEY ("id")
);

-- CreateTable
CREATE TABLE "festivals" (
    "id" SERIAL NOT NULL,
    "slug" VARCHAR(255) NOT NULL,
    "name" VARCHAR(255) NOT NULL,
    "short_name" VARCHAR(100),
    "description" TEXT,
    "logo_url" VARCHAR(500),
    "website" VARCHAR(500),
    "location_id" INTEGER NOT NULL,
    "founded_year" INTEGER,
    "is_active" BOOLEAN NOT NULL DEFAULT true,
    "created_at" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updated_at" TIMESTAMP(3) NOT NULL,

    CONSTRAINT "festivals_pkey" PRIMARY KEY ("id")
);

-- CreateTable
CREATE TABLE "festival_editions" (
    "id" SERIAL NOT NULL,
    "festival_id" INTEGER NOT NULL,
    "edition_number" INTEGER NOT NULL,
    "year" INTEGER NOT NULL,
    "start_date" DATE NOT NULL,
    "end_date" DATE NOT NULL,
    "theme" VARCHAR(255),
    "description" TEXT,
    "poster_url" VARCHAR(500),
    "website_url" VARCHAR(500),
    "is_published" BOOLEAN NOT NULL DEFAULT false,
    "created_at" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updated_at" TIMESTAMP(3) NOT NULL,

    CONSTRAINT "festival_editions_pkey" PRIMARY KEY ("id")
);

-- CreateTable
CREATE TABLE "festival_section_templates" (
    "id" SERIAL NOT NULL,
    "festival_id" INTEGER NOT NULL,
    "slug" VARCHAR(255) NOT NULL,
    "name" VARCHAR(255) NOT NULL,
    "description" TEXT,
    "is_competitive" BOOLEAN NOT NULL DEFAULT false,
    "display_order" INTEGER NOT NULL DEFAULT 0,
    "is_active" BOOLEAN NOT NULL DEFAULT true,
    "created_at" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updated_at" TIMESTAMP(3) NOT NULL,

    CONSTRAINT "festival_section_templates_pkey" PRIMARY KEY ("id")
);

-- CreateTable
CREATE TABLE "festival_sections" (
    "id" SERIAL NOT NULL,
    "edition_id" INTEGER NOT NULL,
    "template_id" INTEGER,
    "slug" VARCHAR(255) NOT NULL,
    "name" VARCHAR(255) NOT NULL,
    "description" TEXT,
    "is_competitive" BOOLEAN NOT NULL DEFAULT false,
    "display_order" INTEGER NOT NULL DEFAULT 0,
    "created_at" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updated_at" TIMESTAMP(3) NOT NULL,

    CONSTRAINT "festival_sections_pkey" PRIMARY KEY ("id")
);

-- CreateTable
CREATE TABLE "festival_jury" (
    "id" SERIAL NOT NULL,
    "section_id" INTEGER NOT NULL,
    "person_id" INTEGER NOT NULL,
    "role" VARCHAR(100),
    "billing_order" INTEGER NOT NULL DEFAULT 0,
    "created_at" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,

    CONSTRAINT "festival_jury_pkey" PRIMARY KEY ("id")
);

-- CreateTable
CREATE TABLE "festival_screenings" (
    "id" SERIAL NOT NULL,
    "edition_id" INTEGER NOT NULL,
    "section_id" INTEGER NOT NULL,
    "movie_id" INTEGER NOT NULL,
    "screening_date" DATE NOT NULL,
    "screening_time" TIME,
    "venue_id" INTEGER,
    "premiere_type" "premiere_type" NOT NULL DEFAULT 'REGULAR',
    "is_official" BOOLEAN NOT NULL DEFAULT true,
    "notes" TEXT,
    "created_at" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updated_at" TIMESTAMP(3) NOT NULL,

    CONSTRAINT "festival_screenings_pkey" PRIMARY KEY ("id")
);

-- CreateTable
CREATE TABLE "festival_awards" (
    "id" SERIAL NOT NULL,
    "festival_id" INTEGER NOT NULL,
    "slug" VARCHAR(255) NOT NULL,
    "name" VARCHAR(255) NOT NULL,
    "description" TEXT,
    "award_type" "festival_award_type" NOT NULL DEFAULT 'FILM',
    "is_active" BOOLEAN NOT NULL DEFAULT true,
    "display_order" INTEGER NOT NULL DEFAULT 0,
    "created_at" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updated_at" TIMESTAMP(3) NOT NULL,

    CONSTRAINT "festival_awards_pkey" PRIMARY KEY ("id")
);

-- CreateTable
CREATE TABLE "festival_award_winners" (
    "id" SERIAL NOT NULL,
    "award_id" INTEGER NOT NULL,
    "edition_id" INTEGER NOT NULL,
    "movie_id" INTEGER,
    "person_id" INTEGER,
    "result" "award_result" NOT NULL DEFAULT 'WON',
    "citation" VARCHAR(500),
    "notes" TEXT,
    "created_at" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updated_at" TIMESTAMP(3) NOT NULL,

    CONSTRAINT "festival_award_winners_pkey" PRIMARY KEY ("id")
);

-- CreateIndex
CREATE UNIQUE INDEX "movies_slug_key" ON "movies"("slug");

-- CreateIndex
CREATE INDEX "movies_slug_idx" ON "movies"("slug");

-- CreateIndex
CREATE INDEX "movies_title_idx" ON "movies"("title");

-- CreateIndex
CREATE INDEX "movies_year_idx" ON "movies"("year");

-- CreateIndex
CREATE INDEX "movies_tipo_duracion_idx" ON "movies"("tipo_duracion");

-- CreateIndex
CREATE INDEX "movies_rating_id_idx" ON "movies"("rating_id");

-- CreateIndex
CREATE INDEX "movies_filming_start_year_idx" ON "movies"("filming_start_year");

-- CreateIndex
CREATE INDEX "movies_filming_start_year_filming_start_month_idx" ON "movies"("filming_start_year", "filming_start_month");

-- CreateIndex
CREATE INDEX "movies_is_coproduction_idx" ON "movies"("is_coproduction");

-- CreateIndex
CREATE INDEX "movies_production_type_idx" ON "movies"("production_type");

-- CreateIndex
CREATE INDEX "movies_color_type_id_idx" ON "movies"("color_type_id");

-- CreateIndex
CREATE INDEX "movies_stage_idx" ON "movies"("stage");

-- CreateIndex
CREATE INDEX "movies_release_year_idx" ON "movies"("release_year");

-- CreateIndex
CREATE INDEX "movies_release_year_release_month_idx" ON "movies"("release_year", "release_month");

-- CreateIndex
CREATE INDEX "movies_release_year_release_month_release_day_idx" ON "movies"("release_year", "release_month", "release_day");

-- CreateIndex
CREATE INDEX "movies_created_at_idx" ON "movies"("created_at");

-- CreateIndex
CREATE INDEX "idx_movies_synopsis_locked" ON "movies"("synopsis_locked");

-- CreateIndex
CREATE INDEX "idx_movies_tmdb_id" ON "movies"("tmdb_id");

-- CreateIndex
CREATE UNIQUE INDEX "screening_venues_slug_key" ON "screening_venues"("slug");

-- CreateIndex
CREATE INDEX "screening_venues_name_idx" ON "screening_venues"("name");

-- CreateIndex
CREATE INDEX "screening_venues_type_idx" ON "screening_venues"("type");

-- CreateIndex
CREATE INDEX "screening_venues_is_active_idx" ON "screening_venues"("is_active");

-- CreateIndex
CREATE INDEX "audit_logs_user_id_idx" ON "audit_logs"("user_id");

-- CreateIndex
CREATE INDEX "audit_logs_createdAt_idx" ON "audit_logs"("createdAt");

-- CreateIndex
CREATE INDEX "movie_screenings_movie_id_idx" ON "movie_screenings"("movie_id");

-- CreateIndex
CREATE INDEX "movie_screenings_venue_id_idx" ON "movie_screenings"("venue_id");

-- CreateIndex
CREATE INDEX "movie_screenings_screening_date_idx" ON "movie_screenings"("screening_date");

-- CreateIndex
CREATE UNIQUE INDEX "movie_screenings_movie_id_venue_id_screening_date_key" ON "movie_screenings"("movie_id", "venue_id", "screening_date");

-- CreateIndex
CREATE INDEX "movie_alternative_titles_movie_id_idx" ON "movie_alternative_titles"("movie_id");

-- CreateIndex
CREATE INDEX "movie_alternative_titles_title_idx" ON "movie_alternative_titles"("title");

-- CreateIndex
CREATE INDEX "movie_links_movie_id_idx" ON "movie_links"("movie_id");

-- CreateIndex
CREATE INDEX "movie_links_type_idx" ON "movie_links"("type");

-- CreateIndex
CREATE UNIQUE INDEX "people_slug_key" ON "people"("slug");

-- CreateIndex
CREATE INDEX "people_slug_idx" ON "people"("slug");

-- CreateIndex
CREATE INDEX "people_first_name_idx" ON "people"("first_name");

-- CreateIndex
CREATE INDEX "people_last_name_idx" ON "people"("last_name");

-- CreateIndex
CREATE INDEX "people_birth_location_id_idx" ON "people"("birth_location_id");

-- CreateIndex
CREATE INDEX "people_death_location_id_idx" ON "people"("death_location_id");

-- CreateIndex
CREATE INDEX "people_is_active_idx" ON "people"("is_active");

-- CreateIndex
CREATE INDEX "people_birth_year_idx" ON "people"("birth_year");

-- CreateIndex
CREATE INDEX "people_birth_year_birth_month_idx" ON "people"("birth_year", "birth_month");

-- CreateIndex
CREATE INDEX "people_death_year_idx" ON "people"("death_year");

-- CreateIndex
CREATE INDEX "people_death_year_death_month_idx" ON "people"("death_year", "death_month");

-- CreateIndex
CREATE INDEX "people_created_at_idx" ON "people"("created_at");

-- CreateIndex
CREATE INDEX "idx_people_imdb_id" ON "people"("imdb_id");

-- CreateIndex
CREATE INDEX "idx_people_tmdb_id" ON "people"("tmdb_id");

-- CreateIndex
CREATE INDEX "idx_people_alt_names_full_name" ON "people_alternative_names"("full_name");

-- CreateIndex
CREATE INDEX "idx_people_alt_names_person_id" ON "people_alternative_names"("person_id");

-- CreateIndex
CREATE UNIQUE INDEX "uq_people_alt_names_person_fullname" ON "people_alternative_names"("person_id", "full_name");

-- CreateIndex
CREATE INDEX "idx_movie_stats_week" ON "movie_stats"("views_week" DESC);

-- CreateIndex
CREATE INDEX "idx_movie_stats_month" ON "movie_stats"("views_month" DESC);

-- CreateIndex
CREATE INDEX "idx_movie_stats_year" ON "movie_stats"("views_year" DESC);

-- CreateIndex
CREATE INDEX "idx_movie_stats_total" ON "movie_stats"("views_total" DESC);

-- CreateIndex
CREATE INDEX "person_links_person_id_idx" ON "person_links"("person_id");

-- CreateIndex
CREATE INDEX "person_links_type_idx" ON "person_links"("type");

-- CreateIndex
CREATE INDEX "person_links_is_active_idx" ON "person_links"("is_active");

-- CreateIndex
CREATE UNIQUE INDEX "genres_slug_key" ON "genres"("slug");

-- CreateIndex
CREATE UNIQUE INDEX "production_companies_slug_key" ON "production_companies"("slug");

-- CreateIndex
CREATE UNIQUE INDEX "distribution_companies_slug_key" ON "distribution_companies"("slug");

-- CreateIndex
CREATE INDEX "movie_cast_movie_id_idx" ON "movie_cast"("movie_id");

-- CreateIndex
CREATE INDEX "movie_cast_person_id_idx" ON "movie_cast"("person_id");

-- CreateIndex
CREATE INDEX "idx_movie_cast_alt_name" ON "movie_cast"("alternative_name_id");

-- CreateIndex
CREATE INDEX "idx_movie_cast_is_actor" ON "movie_cast"("is_actor");

-- CreateIndex
CREATE UNIQUE INDEX "movie_cast_movie_id_person_id_character_name_key" ON "movie_cast"("movie_id", "person_id", "character_name");

-- CreateIndex
CREATE INDEX "movie_crew_movie_id_idx" ON "movie_crew"("movie_id");

-- CreateIndex
CREATE INDEX "movie_crew_person_id_idx" ON "movie_crew"("person_id");

-- CreateIndex
CREATE INDEX "movie_crew_role_id_idx" ON "movie_crew"("role_id");

-- CreateIndex
CREATE INDEX "movie_crew_movie_id_role_id_idx" ON "movie_crew"("movie_id", "role_id");

-- CreateIndex
CREATE INDEX "idx_movie_crew_alt_name" ON "movie_crew"("alternative_name_id");

-- CreateIndex
CREATE UNIQUE INDEX "movie_crew_movie_id_person_id_role_id_key" ON "movie_crew"("movie_id", "person_id", "role_id");

-- CreateIndex
CREATE UNIQUE INDEX "color_types_slug_key" ON "color_types"("slug");

-- CreateIndex
CREATE INDEX "color_types_category_idx" ON "color_types"("category");

-- CreateIndex
CREATE INDEX "color_types_slug_idx" ON "color_types"("slug");

-- CreateIndex
CREATE UNIQUE INDEX "locations_slug_key" ON "locations"("slug");

-- CreateIndex
CREATE INDEX "locations_parent_id_idx" ON "locations"("parent_id");

-- CreateIndex
CREATE INDEX "locations_name_idx" ON "locations"("name");

-- CreateIndex
CREATE INDEX "locations_slug_idx" ON "locations"("slug");

-- CreateIndex
CREATE UNIQUE INDEX "themes_slug_key" ON "themes"("slug");

-- CreateIndex
CREATE INDEX "themes_slug_idx" ON "themes"("slug");

-- CreateIndex
CREATE INDEX "themes_name_idx" ON "themes"("name");

-- CreateIndex
CREATE UNIQUE INDEX "roles_slug_key" ON "roles"("slug");

-- CreateIndex
CREATE INDEX "roles_department_idx" ON "roles"("department");

-- CreateIndex
CREATE INDEX "roles_is_active_idx" ON "roles"("is_active");

-- CreateIndex
CREATE INDEX "roles_is_main_role_idx" ON "roles"("is_main_role");

-- CreateIndex
CREATE UNIQUE INDEX "roles_name_department_key" ON "roles"("name", "department");

-- CreateIndex
CREATE UNIQUE INDEX "ratings_slug_key" ON "ratings"("slug");

-- CreateIndex
CREATE UNIQUE INDEX "ratings_name_key" ON "ratings"("name");

-- CreateIndex
CREATE INDEX "ratings_slug_idx" ON "ratings"("slug");

-- CreateIndex
CREATE INDEX "ratings_order_idx" ON "ratings"("order");

-- CreateIndex
CREATE UNIQUE INDEX "sessions_sessionToken_key" ON "sessions"("sessionToken");

-- CreateIndex
CREATE UNIQUE INDEX "accounts_provider_providerAccountId_key" ON "accounts"("provider", "providerAccountId");

-- CreateIndex
CREATE UNIQUE INDEX "verification_tokens_token_key" ON "verification_tokens"("token");

-- CreateIndex
CREATE UNIQUE INDEX "verification_tokens_identifier_token_key" ON "verification_tokens"("identifier", "token");

-- CreateIndex
CREATE UNIQUE INDEX "languages_code_key" ON "languages"("code");

-- CreateIndex
CREATE UNIQUE INDEX "first_name_genders_name_key" ON "first_name_genders"("name");

-- CreateIndex
CREATE INDEX "idx_first_name_genders_gender" ON "first_name_genders"("gender");

-- CreateIndex
CREATE INDEX "idx_first_name_genders_name" ON "first_name_genders"("name");

-- CreateIndex
CREATE UNIQUE INDEX "users_email_key" ON "users"("email");

-- CreateIndex
CREATE UNIQUE INDEX "users_username_key" ON "users"("username");

-- CreateIndex
CREATE UNIQUE INDEX "countries_code_key" ON "countries"("code");

-- CreateIndex
CREATE UNIQUE INDEX "images_cloudinary_public_id_key" ON "images"("cloudinary_public_id");

-- CreateIndex
CREATE INDEX "idx_images_photo_date" ON "images"("photo_date");

-- CreateIndex
CREATE INDEX "idx_image_people_person_id" ON "image_people"("person_id");

-- CreateIndex
CREATE UNIQUE INDEX "image_people_image_id_person_id_key" ON "image_people"("image_id", "person_id");

-- CreateIndex
CREATE INDEX "idx_page_views_type_date" ON "page_views"("page_type", "created_at");

-- CreateIndex
CREATE UNIQUE INDEX "tmdb_pending_movies_tmdb_id_key" ON "tmdb_pending_movies"("tmdb_id");

-- CreateIndex
CREATE INDEX "tmdb_pending_movies_status_idx" ON "tmdb_pending_movies"("status");

-- CreateIndex
CREATE INDEX "tmdb_pending_movies_tmdb_id_idx" ON "tmdb_pending_movies"("tmdb_id");

-- CreateIndex
CREATE INDEX "tmdb_pending_movies_created_at_idx" ON "tmdb_pending_movies"("created_at");

-- CreateIndex
CREATE UNIQUE INDEX "festivals_slug_key" ON "festivals"("slug");

-- CreateIndex
CREATE INDEX "festivals_slug_idx" ON "festivals"("slug");

-- CreateIndex
CREATE INDEX "festivals_name_idx" ON "festivals"("name");

-- CreateIndex
CREATE INDEX "festivals_location_id_idx" ON "festivals"("location_id");

-- CreateIndex
CREATE INDEX "festivals_is_active_idx" ON "festivals"("is_active");

-- CreateIndex
CREATE INDEX "festival_editions_festival_id_idx" ON "festival_editions"("festival_id");

-- CreateIndex
CREATE INDEX "festival_editions_year_idx" ON "festival_editions"("year");

-- CreateIndex
CREATE INDEX "festival_editions_start_date_idx" ON "festival_editions"("start_date");

-- CreateIndex
CREATE INDEX "festival_editions_end_date_idx" ON "festival_editions"("end_date");

-- CreateIndex
CREATE INDEX "festival_editions_is_published_idx" ON "festival_editions"("is_published");

-- CreateIndex
CREATE UNIQUE INDEX "festival_editions_festival_id_edition_number_key" ON "festival_editions"("festival_id", "edition_number");

-- CreateIndex
CREATE UNIQUE INDEX "festival_editions_festival_id_year_key" ON "festival_editions"("festival_id", "year");

-- CreateIndex
CREATE INDEX "festival_section_templates_festival_id_idx" ON "festival_section_templates"("festival_id");

-- CreateIndex
CREATE INDEX "festival_section_templates_is_active_idx" ON "festival_section_templates"("is_active");

-- CreateIndex
CREATE UNIQUE INDEX "festival_section_templates_festival_id_slug_key" ON "festival_section_templates"("festival_id", "slug");

-- CreateIndex
CREATE INDEX "festival_sections_edition_id_idx" ON "festival_sections"("edition_id");

-- CreateIndex
CREATE INDEX "festival_sections_template_id_idx" ON "festival_sections"("template_id");

-- CreateIndex
CREATE INDEX "festival_sections_is_competitive_idx" ON "festival_sections"("is_competitive");

-- CreateIndex
CREATE UNIQUE INDEX "festival_sections_edition_id_slug_key" ON "festival_sections"("edition_id", "slug");

-- CreateIndex
CREATE INDEX "festival_jury_section_id_idx" ON "festival_jury"("section_id");

-- CreateIndex
CREATE INDEX "festival_jury_person_id_idx" ON "festival_jury"("person_id");

-- CreateIndex
CREATE UNIQUE INDEX "festival_jury_section_id_person_id_key" ON "festival_jury"("section_id", "person_id");

-- CreateIndex
CREATE INDEX "festival_screenings_edition_id_idx" ON "festival_screenings"("edition_id");

-- CreateIndex
CREATE INDEX "festival_screenings_section_id_idx" ON "festival_screenings"("section_id");

-- CreateIndex
CREATE INDEX "festival_screenings_movie_id_idx" ON "festival_screenings"("movie_id");

-- CreateIndex
CREATE INDEX "festival_screenings_screening_date_idx" ON "festival_screenings"("screening_date");

-- CreateIndex
CREATE INDEX "festival_screenings_premiere_type_idx" ON "festival_screenings"("premiere_type");

-- CreateIndex
CREATE INDEX "festival_screenings_venue_id_idx" ON "festival_screenings"("venue_id");

-- CreateIndex
CREATE INDEX "festival_screenings_edition_id_section_id_idx" ON "festival_screenings"("edition_id", "section_id");

-- CreateIndex
CREATE INDEX "festival_screenings_edition_id_screening_date_idx" ON "festival_screenings"("edition_id", "screening_date");

-- CreateIndex
CREATE INDEX "festival_awards_festival_id_idx" ON "festival_awards"("festival_id");

-- CreateIndex
CREATE INDEX "festival_awards_award_type_idx" ON "festival_awards"("award_type");

-- CreateIndex
CREATE INDEX "festival_awards_is_active_idx" ON "festival_awards"("is_active");

-- CreateIndex
CREATE UNIQUE INDEX "festival_awards_festival_id_slug_key" ON "festival_awards"("festival_id", "slug");

-- CreateIndex
CREATE INDEX "festival_award_winners_award_id_idx" ON "festival_award_winners"("award_id");

-- CreateIndex
CREATE INDEX "festival_award_winners_edition_id_idx" ON "festival_award_winners"("edition_id");

-- CreateIndex
CREATE INDEX "festival_award_winners_movie_id_idx" ON "festival_award_winners"("movie_id");

-- CreateIndex
CREATE INDEX "festival_award_winners_person_id_idx" ON "festival_award_winners"("person_id");

-- CreateIndex
CREATE INDEX "festival_award_winners_result_idx" ON "festival_award_winners"("result");

-- CreateIndex
CREATE INDEX "festival_award_winners_edition_id_award_id_idx" ON "festival_award_winners"("edition_id", "award_id");

-- AddForeignKey
ALTER TABLE "movies" ADD CONSTRAINT "movies_color_type_id_fkey" FOREIGN KEY ("color_type_id") REFERENCES "color_types"("id") ON DELETE SET NULL ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "movies" ADD CONSTRAINT "movies_rating_id_fkey" FOREIGN KEY ("rating_id") REFERENCES "ratings"("id") ON DELETE SET NULL ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "audit_logs" ADD CONSTRAINT "audit_logs_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "users"("id") ON DELETE RESTRICT ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "movie_screenings" ADD CONSTRAINT "movie_screenings_movie_id_fkey" FOREIGN KEY ("movie_id") REFERENCES "movies"("id") ON DELETE CASCADE ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "movie_screenings" ADD CONSTRAINT "movie_screenings_venue_id_fkey" FOREIGN KEY ("venue_id") REFERENCES "screening_venues"("id") ON DELETE CASCADE ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "movie_alternative_titles" ADD CONSTRAINT "movie_alternative_titles_movie_id_fkey" FOREIGN KEY ("movie_id") REFERENCES "movies"("id") ON DELETE CASCADE ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "movie_links" ADD CONSTRAINT "movie_links_movie_id_fkey" FOREIGN KEY ("movie_id") REFERENCES "movies"("id") ON DELETE CASCADE ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "people" ADD CONSTRAINT "people_birth_location_id_fkey" FOREIGN KEY ("birth_location_id") REFERENCES "locations"("id") ON DELETE SET NULL ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "people" ADD CONSTRAINT "people_death_location_id_fkey" FOREIGN KEY ("death_location_id") REFERENCES "locations"("id") ON DELETE SET NULL ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "people_alternative_names" ADD CONSTRAINT "people_alternative_names_person_id_fkey" FOREIGN KEY ("person_id") REFERENCES "people"("id") ON DELETE CASCADE ON UPDATE NO ACTION;

-- AddForeignKey
ALTER TABLE "person_nationalities" ADD CONSTRAINT "person_nationalities_location_id_fkey" FOREIGN KEY ("location_id") REFERENCES "locations"("id") ON DELETE CASCADE ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "person_nationalities" ADD CONSTRAINT "person_nationalities_person_id_fkey" FOREIGN KEY ("person_id") REFERENCES "people"("id") ON DELETE CASCADE ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "movie_stats" ADD CONSTRAINT "movie_stats_movie_id_fkey" FOREIGN KEY ("movie_id") REFERENCES "movies"("id") ON DELETE CASCADE ON UPDATE NO ACTION;

-- AddForeignKey
ALTER TABLE "person_links" ADD CONSTRAINT "person_links_person_id_fkey" FOREIGN KEY ("person_id") REFERENCES "people"("id") ON DELETE CASCADE ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "movie_cast" ADD CONSTRAINT "movie_cast_alternative_name_id_fkey" FOREIGN KEY ("alternative_name_id") REFERENCES "people_alternative_names"("id") ON DELETE SET NULL ON UPDATE NO ACTION;

-- AddForeignKey
ALTER TABLE "movie_cast" ADD CONSTRAINT "movie_cast_movie_id_fkey" FOREIGN KEY ("movie_id") REFERENCES "movies"("id") ON DELETE CASCADE ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "movie_cast" ADD CONSTRAINT "movie_cast_person_id_fkey" FOREIGN KEY ("person_id") REFERENCES "people"("id") ON DELETE CASCADE ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "movie_crew" ADD CONSTRAINT "movie_crew_alternative_name_id_fkey" FOREIGN KEY ("alternative_name_id") REFERENCES "people_alternative_names"("id") ON DELETE SET NULL ON UPDATE NO ACTION;

-- AddForeignKey
ALTER TABLE "movie_crew" ADD CONSTRAINT "movie_crew_movie_id_fkey" FOREIGN KEY ("movie_id") REFERENCES "movies"("id") ON DELETE CASCADE ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "movie_crew" ADD CONSTRAINT "movie_crew_person_id_fkey" FOREIGN KEY ("person_id") REFERENCES "people"("id") ON DELETE CASCADE ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "movie_crew" ADD CONSTRAINT "movie_crew_role_id_fkey" FOREIGN KEY ("role_id") REFERENCES "roles"("id") ON DELETE RESTRICT ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "movie_genres" ADD CONSTRAINT "movie_genres_genre_id_fkey" FOREIGN KEY ("genre_id") REFERENCES "genres"("id") ON DELETE CASCADE ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "movie_genres" ADD CONSTRAINT "movie_genres_movie_id_fkey" FOREIGN KEY ("movie_id") REFERENCES "movies"("id") ON DELETE CASCADE ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "movie_production_companies" ADD CONSTRAINT "movie_production_companies_company_id_fkey" FOREIGN KEY ("company_id") REFERENCES "production_companies"("id") ON DELETE CASCADE ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "movie_production_companies" ADD CONSTRAINT "movie_production_companies_movie_id_fkey" FOREIGN KEY ("movie_id") REFERENCES "movies"("id") ON DELETE CASCADE ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "movie_distribution_companies" ADD CONSTRAINT "movie_distribution_companies_company_id_fkey" FOREIGN KEY ("company_id") REFERENCES "distribution_companies"("id") ON DELETE CASCADE ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "movie_distribution_companies" ADD CONSTRAINT "movie_distribution_companies_movie_id_fkey" FOREIGN KEY ("movie_id") REFERENCES "movies"("id") ON DELETE CASCADE ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "locations" ADD CONSTRAINT "locations_parent_id_fkey" FOREIGN KEY ("parent_id") REFERENCES "locations"("id") ON DELETE RESTRICT ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "movie_videos" ADD CONSTRAINT "movie_videos_movie_id_fkey" FOREIGN KEY ("movie_id") REFERENCES "movies"("id") ON DELETE CASCADE ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "movie_awards" ADD CONSTRAINT "movie_awards_award_id_fkey" FOREIGN KEY ("award_id") REFERENCES "awards"("id") ON DELETE CASCADE ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "movie_awards" ADD CONSTRAINT "movie_awards_movie_id_fkey" FOREIGN KEY ("movie_id") REFERENCES "movies"("id") ON DELETE CASCADE ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "movie_awards" ADD CONSTRAINT "movie_awards_recipient_person_id_fkey" FOREIGN KEY ("recipient_person_id") REFERENCES "people"("id") ON DELETE SET NULL ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "movie_themes" ADD CONSTRAINT "movie_themes_movie_id_fkey" FOREIGN KEY ("movie_id") REFERENCES "movies"("id") ON DELETE CASCADE ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "movie_themes" ADD CONSTRAINT "movie_themes_theme_id_fkey" FOREIGN KEY ("theme_id") REFERENCES "themes"("id") ON DELETE CASCADE ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "sessions" ADD CONSTRAINT "sessions_userId_fkey" FOREIGN KEY ("userId") REFERENCES "users"("id") ON DELETE CASCADE ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "accounts" ADD CONSTRAINT "accounts_userId_fkey" FOREIGN KEY ("userId") REFERENCES "users"("id") ON DELETE CASCADE ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "movie_countries" ADD CONSTRAINT "movie_countries_country_id_fkey" FOREIGN KEY ("country_id") REFERENCES "locations"("id") ON DELETE CASCADE ON UPDATE NO ACTION;

-- AddForeignKey
ALTER TABLE "movie_countries" ADD CONSTRAINT "movie_countries_movie_id_fkey" FOREIGN KEY ("movie_id") REFERENCES "movies"("id") ON DELETE CASCADE ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "user_ratings" ADD CONSTRAINT "user_ratings_movie_id_fkey" FOREIGN KEY ("movie_id") REFERENCES "movies"("id") ON DELETE CASCADE ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "user_ratings" ADD CONSTRAINT "user_ratings_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "users"("id") ON DELETE CASCADE ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "user_watchlist" ADD CONSTRAINT "user_watchlist_movie_id_fkey" FOREIGN KEY ("movie_id") REFERENCES "movies"("id") ON DELETE CASCADE ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "user_watchlist" ADD CONSTRAINT "user_watchlist_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "users"("id") ON DELETE CASCADE ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "user_watched" ADD CONSTRAINT "user_watched_movie_id_fkey" FOREIGN KEY ("movie_id") REFERENCES "movies"("id") ON DELETE CASCADE ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "user_watched" ADD CONSTRAINT "user_watched_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "users"("id") ON DELETE CASCADE ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "images" ADD CONSTRAINT "images_movie_id_fkey" FOREIGN KEY ("movie_id") REFERENCES "movies"("id") ON DELETE SET NULL ON UPDATE NO ACTION;

-- AddForeignKey
ALTER TABLE "image_people" ADD CONSTRAINT "image_people_image_id_fkey" FOREIGN KEY ("image_id") REFERENCES "images"("id") ON DELETE CASCADE ON UPDATE NO ACTION;

-- AddForeignKey
ALTER TABLE "image_people" ADD CONSTRAINT "image_people_person_id_fkey" FOREIGN KEY ("person_id") REFERENCES "people"("id") ON DELETE CASCADE ON UPDATE NO ACTION;

-- AddForeignKey
ALTER TABLE "page_views" ADD CONSTRAINT "page_views_movie_id_fkey" FOREIGN KEY ("movie_id") REFERENCES "movies"("id") ON DELETE SET NULL ON UPDATE NO ACTION;

-- AddForeignKey
ALTER TABLE "page_views" ADD CONSTRAINT "page_views_person_id_fkey" FOREIGN KEY ("person_id") REFERENCES "people"("id") ON DELETE SET NULL ON UPDATE NO ACTION;

-- AddForeignKey
ALTER TABLE "tmdb_pending_movies" ADD CONSTRAINT "tmdb_pending_movies_local_movie_id_fkey" FOREIGN KEY ("local_movie_id") REFERENCES "movies"("id") ON DELETE SET NULL ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "festivals" ADD CONSTRAINT "festivals_location_id_fkey" FOREIGN KEY ("location_id") REFERENCES "locations"("id") ON DELETE RESTRICT ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "festival_editions" ADD CONSTRAINT "festival_editions_festival_id_fkey" FOREIGN KEY ("festival_id") REFERENCES "festivals"("id") ON DELETE CASCADE ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "festival_section_templates" ADD CONSTRAINT "festival_section_templates_festival_id_fkey" FOREIGN KEY ("festival_id") REFERENCES "festivals"("id") ON DELETE CASCADE ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "festival_sections" ADD CONSTRAINT "festival_sections_edition_id_fkey" FOREIGN KEY ("edition_id") REFERENCES "festival_editions"("id") ON DELETE CASCADE ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "festival_sections" ADD CONSTRAINT "festival_sections_template_id_fkey" FOREIGN KEY ("template_id") REFERENCES "festival_section_templates"("id") ON DELETE SET NULL ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "festival_jury" ADD CONSTRAINT "festival_jury_section_id_fkey" FOREIGN KEY ("section_id") REFERENCES "festival_sections"("id") ON DELETE CASCADE ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "festival_jury" ADD CONSTRAINT "festival_jury_person_id_fkey" FOREIGN KEY ("person_id") REFERENCES "people"("id") ON DELETE CASCADE ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "festival_screenings" ADD CONSTRAINT "festival_screenings_edition_id_fkey" FOREIGN KEY ("edition_id") REFERENCES "festival_editions"("id") ON DELETE CASCADE ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "festival_screenings" ADD CONSTRAINT "festival_screenings_section_id_fkey" FOREIGN KEY ("section_id") REFERENCES "festival_sections"("id") ON DELETE CASCADE ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "festival_screenings" ADD CONSTRAINT "festival_screenings_movie_id_fkey" FOREIGN KEY ("movie_id") REFERENCES "movies"("id") ON DELETE CASCADE ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "festival_screenings" ADD CONSTRAINT "festival_screenings_venue_id_fkey" FOREIGN KEY ("venue_id") REFERENCES "screening_venues"("id") ON DELETE SET NULL ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "festival_awards" ADD CONSTRAINT "festival_awards_festival_id_fkey" FOREIGN KEY ("festival_id") REFERENCES "festivals"("id") ON DELETE CASCADE ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "festival_award_winners" ADD CONSTRAINT "festival_award_winners_award_id_fkey" FOREIGN KEY ("award_id") REFERENCES "festival_awards"("id") ON DELETE CASCADE ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "festival_award_winners" ADD CONSTRAINT "festival_award_winners_edition_id_fkey" FOREIGN KEY ("edition_id") REFERENCES "festival_editions"("id") ON DELETE CASCADE ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "festival_award_winners" ADD CONSTRAINT "festival_award_winners_movie_id_fkey" FOREIGN KEY ("movie_id") REFERENCES "movies"("id") ON DELETE CASCADE ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "festival_award_winners" ADD CONSTRAINT "festival_award_winners_person_id_fkey" FOREIGN KEY ("person_id") REFERENCES "people"("id") ON DELETE CASCADE ON UPDATE CASCADE;


```
